<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Hack-A-Code</title>
<meta name="generator" content="WYSIWYG Web Builder 16 - http://www.wysiwygwebbuilder.com">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="flexible_layout.css" rel="stylesheet">
<link href="Problem.css" rel="stylesheet">
<script src="jquery-1.12.4.min.js"></script>
<script src="popper.min.js"></script>
<script src="util.min.js"></script>
<script src="collapse.min.js"></script>
<script src="dropdown.min.js"></script>
<script src="Problem.js"></script>
</head>
<body>
   <div id="wb_header">
      <div id="header">
         <div class="row">
            <div class="col-1">
               <div id="wb_ThemeableMenu2" style="display:inline-block;width:100%;z-index:0;">
                  <div id="ThemeableMenu2" class="ThemeableMenu2" style="width:100%;height:auto !important;">
                     <div class="container">
                        <a id="ThemeableMenu2-logo" href="#"><img alt="" title="" src="images/logo32.jpg"></a>
                        <div class="navbar-header">
                           <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ThemeableMenu2-navbar-collapse">
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                           </button>
                        </div>
                        <div class="ThemeableMenu2-navbar-collapse collapse">
                           <ul class="nav navbar-nav">
                              <li class="nav-item">
                                 <a href="" class="nav-link"><i class="rowing"></i>Hack-A-Code</a>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <div class="col-2">
               <div id="wb_CssMenu1" style="display:inline-block;width:100%;z-index:1;">
                  <ul id="CssMenu1" role="menubar" class="nav">
                     <li class="nav-item firstmain"><a role="menuitem" class="nav-link" href="./Dashboard.html" target="_self" title="Dashboard">Dashboard</a>
                     </li>
                     <li class="nav-item"><a role="menuitem" class="nav-link withsubmenu" href="javascript:void(0)" target="_self" title="Learning-Path">Learning-Path</a>
                        
                     </li>
                     <li class="nav-item"><a role="menuitem" class="nav-link withsubmenu" href="./Problems.html" target="_self" title="Problems">Problems</a>
                        
                     </li>
                     <li class="nav-item"><a role="menuitem" class="nav-link" href="./Contest.html" target="_self" title="Contest">Contest</a>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="col-3">
               <div id="wb_ThemeableMenu3" style="display:inline-block;width:100%;z-index:2;">
                  <div id="ThemeableMenu3" class="ThemeableMenu3" style="width:100%;height:auto !important;">
                     <div class="container">
                        <a id="ThemeableMenu3-logo" href="#"><img alt="" title="" src="images/logo32.jpg"></a>
                        <div class="navbar-header">
                           <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".ThemeableMenu3-navbar-collapse">
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                              <span class="icon-bar"></span>
                           </button>
                        </div>
                        <div class="ThemeableMenu3-navbar-collapse collapse">
                           <ul class="nav navbar-nav">
                              <li class="nav-item">
                                 <a href="" class="nav-link">Matiows</a>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div id="wb_LayoutGrid6">
      <div id="LayoutGrid6">
         
         <div class="row">
            <div class="col-1">
               <div id="wb_Text2">
                  <span id ="title" style="color:#000000;font-family:Tahoma;font-size:19px;letter-spacing:1.07px;line-height:5px;"><strong></strong></span>
               </div>
               <div id="wb_Text2">
                  <span id = "description" style="color:#000000;font-family:Tahoma;font-size:16px;line-height:5px;"><br></span>
               </div>
            </div>
            <script>
               fetch('http://localhost:8000/v1/question/2')
                 .then(response => response.json())
                 .then(data => {
                  console.log(data[0].id)
                  const titleSpan = document.getElementById('title');
                  const desSpan = document.getElementById('description');
                  const id = data[0].id;
                  const title = data[0].title;
                  const description = data[0].description;
                  titleSpan.textContent = id + '. ' + title;
                  desSpan.textContent = description;
                 })
                 .catch(error => {
                   console.error('Error:', error);
                 });
             </script>
            <div class="col-2">
               <div id="wb_Card1" style="display:flex;width:100%;z-index:4;">
                  <div id="Card1-card-body">
                     <div id="Card1-card-item0">Problem Tag</div>
                     <hr id="Card1-card-item1">
                     <div id="Card1-card-item2">Array</div>
                     <div id="Card1-card-item3">String</div>
                     <div id="Card1-card-item4">Greedy</div>
                  </div>
               </div>
               <hr id="Line1" style="display:block;width:100%;z-index:5;">
               <div id="wb_Card2" style="display:flex;width:100%;z-index:6;">
                  <div id="Card2-card-body">
                     <div id="Card2-card-item0">Submit</div>
                     <hr id="Card2-card-item1">
                     <div id="Card2-card-item2">Upload your file for testing</div>
                     <div id="Card2-card-item3">Language:  Python 3.8.10</div>
                     <div id="Card2-card-item4">
                        <input type="file" id="input-file">
                        <script>

                           const fileInput = document.getElementById('input-file'); // get the file input element
                           fileInput.addEventListener('change', handleFileUpload); // add an event listener for file upload

                           function handleFileUpload(event) {
                           const file = event.target.files[0]; // get the uploaded file object
                           const fileReader = new FileReader(); // create a new FileReader object
                            
                           // set up a callback function to run when file is loaded
                           fileReader.onload = function () {
                              const fileData = fileReader.result; // get the file data
                              
                              const currentDatetime = new Date().toISOString(); // get current date and time
                              const newFilename = currentDatetime + id + '.py'; // create new filename with date, time, and question number

                              const outputDir = '../../submissions'; // set the output directory path

                              // write the file to the output directory with the new filename
                              const outputFilePath = outputDir + newFilename;
                              const fileWriter = new FileWriter(outputFilePath);
                              fileWriter.write(fileData);

                              console.log('File successfully uploaded and written to ' + outputFilePath);
                           }

                           fileReader.readAsText(file); // read the file as text data
                           }


                           const data = { "question": id, "path": newFilename}
                           fetch('http://localhost:8000/v1/submission', {
                           method: 'POST',
                           headers: {
                              'Content-Type': 'application/json'
                           },
                           body: JSON.stringify(data)
                           })
                           .then(response => response.json())
                             .then(data => {
                               alert(data)
                              
                             })
                             .catch(error => {
                               console.error('Error:', error);
                             });
                         </script>
                        </div>
                     <div id="Card2-card-item5"><a href="#">Submit</a></div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
   <div id="wb_LayoutGrid1">
      <div id="LayoutGrid1">
         <div class="row">
            <div class="col-1">
               <div id="wb_Text1">
                  <span style="color:#FFFFFF;">Copyright Â© Hack-A-Code 2020<br><br>&quot; Where ever you are &quot;</span>
               </div>
            </div>
         </div>
      </div>
   </div>
</body>
</html>